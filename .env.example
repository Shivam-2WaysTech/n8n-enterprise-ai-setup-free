# ============================================================================
# n8n Local Development Environment Configuration Template
# ============================================================================
# Copy this file to .env and update the values according to your setup.
# This template provides safe defaults for local development.

# ============================================================================
# DATABASE CONFIGURATION (PostgreSQL)
# ============================================================================
# Local PostgreSQL database settings
# These values work with the Docker Compose PostgreSQL service
POSTGRES_DB=n8n
POSTGRES_USER=n8n
POSTGRES_PASSWORD=change-this-password

# ============================================================================
# REDIS CONFIGURATION (Cache & Queue)
# ============================================================================
# Local Redis settings for queue management and caching
# This password should match the Redis service configuration
REDIS_PASSWORD=change-this-redis-password

# ============================================================================
# n8n CORE CONFIGURATION
# ============================================================================
# Basic n8n settings for local development
N8N_HOST=localhost
N8N_PORT=5678
N8N_PROTOCOL=http
N8N_EDITOR_BASE_URL=http://localhost:5678
WEBHOOK_URL=http://localhost:5678/
TIMEZONE=UTC

# ============================================================================
# n8n AUTHENTICATION & SECURITY
# ============================================================================
# Basic authentication for n8n interface (set to false for easier local dev)
N8N_BASIC_AUTH_ACTIVE=false
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=your-secure-password

# CRITICAL: Generate a unique 32-character encryption key for your installation
# You can generate one using: openssl rand -base64 32
# This key encrypts sensitive data like credentials - keep it secure!
N8N_ENCRYPTION_KEY=REPLACE-WITH-32-CHAR-ENCRYPTION-KEY

# Security settings (relaxed for local development)
N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=false
N8N_SECURE_COOKIE=false

# ============================================================================
# WORKER & QUEUE CONFIGURATION
# ============================================================================
# Enable queue mode for scalable execution
EXECUTIONS_MODE=queue
N8N_WORKERS_ENABLED=true
N8N_WORKER_TYPE=main
N8N_WORKER_CONCURRENCY=10
OFFLOAD_MANUAL_EXECUTIONS_TO_WORKERS=true

# Queue health monitoring
QUEUE_HEALTH_CHECK_ACTIVE=true

# ============================================================================
# DATABASE CONNECTION SETTINGS
# ============================================================================
# PostgreSQL connection configuration (uses Docker service names)
DB_TYPE=postgresdb
DB_POSTGRESDB_HOST=postgres
DB_POSTGRESDB_PORT=5432
DB_POSTGRESDB_DATABASE=${POSTGRES_DB}
DB_POSTGRESDB_USER=${POSTGRES_USER}
DB_POSTGRESDB_PASSWORD=${POSTGRES_PASSWORD}
DB_POSTGRESDB_SCHEMA=public

# ============================================================================
# REDIS QUEUE CONFIGURATION
# ============================================================================
# Redis connection for Bull queue management (uses Docker service name)
QUEUE_BULL_REDIS_HOST=redis
QUEUE_BULL_REDIS_PORT=6379
QUEUE_BULL_REDIS_PASSWORD=${REDIS_PASSWORD}
QUEUE_BULL_REDIS_DB=0

# ============================================================================
# SMTP EMAIL CONFIGURATION
# ============================================================================
# Configure these settings when you need email functionality
# Leave empty to disable email features during development

# Enable/disable email features
N8N_EMAIL_MODE=smtp

# GMAIL SMTP CONFIGURATION
# To use Gmail SMTP:
# 1. Enable 2-factor authentication on your Google account
# 2. Generate an "App Password" in your Google Account settings
# 3. Use your email as N8N_SMTP_USER and the app password as N8N_SMTP_PASS
N8N_SMTP_HOST=smtp.gmail.com
N8N_SMTP_PORT=587
N8N_SMTP_USER=your-email@gmail.com
N8N_SMTP_PASS=your-gmail-app-password
N8N_SMTP_SENDER=your-email@gmail.com
N8N_SMTP_SSL=false
N8N_SMTP_STARTTLS=true

# ALTERNATIVE SMTP PROVIDERS
# Uncomment and configure the provider you want to use:

# Microsoft Outlook/Hotmail SMTP
# N8N_SMTP_HOST=smtp-mail.outlook.com
# N8N_SMTP_PORT=587
# N8N_SMTP_USER=your-email@outlook.com
# N8N_SMTP_PASS=your-outlook-password
# N8N_SMTP_SENDER=your-email@outlook.com
# N8N_SMTP_SSL=false
# N8N_SMTP_STARTTLS=true

# Yahoo Mail SMTP
# N8N_SMTP_HOST=smtp.mail.yahoo.com
# N8N_SMTP_PORT=587
# N8N_SMTP_USER=your-email@yahoo.com
# N8N_SMTP_PASS=your-yahoo-app-password
# N8N_SMTP_SENDER=your-email@yahoo.com
# N8N_SMTP_SSL=false
# N8N_SMTP_STARTTLS=true

# Custom SMTP Server
# N8N_SMTP_HOST=your-smtp-server.com
# N8N_SMTP_PORT=587
# N8N_SMTP_USER=your-username
# N8N_SMTP_PASS=your-password
# N8N_SMTP_SENDER=noreply@your-domain.com
# N8N_SMTP_SSL=false
# N8N_SMTP_STARTTLS=true

# ============================================================================
# LOGGING & DEBUGGING
# ============================================================================
# Logging configuration for development
N8N_LOG_LEVEL=info
N8N_LOG_OUTPUT=console

# ============================================================================
# PERFORMANCE & LIMITS
# ============================================================================
# Execution and performance settings
EXECUTIONS_DATA_PRUNE=true
EXECUTIONS_DATA_MAX_AGE=336
N8N_METRICS=false

# ============================================================================
# DEVELOPMENT FEATURES
# ============================================================================
# Features useful for development
N8N_DISABLE_UI=false
N8N_TEMPLATES_ENABLED=true
N8N_ONBOARDING_FLOW_DISABLED=false
N8N_DIAGNOSTICS_ENABLED=false

# ============================================================================
# EXTERNAL INTEGRATIONS (Optional)
# ============================================================================
# Configure these when integrating with external services

# Generic OAuth settings (configure per service)
# OAUTH_CALLBACK_URLS=http://localhost:5678/rest/oauth2-credential/callback

# Webhook settings
# N8N_PAYLOAD_SIZE_MAX=16
# N8N_BINARY_DATA_TTL=60

# ============================================================================
# SETUP INSTRUCTIONS
# ============================================================================
# 1. Copy this file to .env: cp .env.example .env
# 2. Generate an encryption key: openssl rand -base64 32
# 3. Replace N8N_ENCRYPTION_KEY with your generated key
# 4. Update database and Redis passwords
# 5. Configure SMTP settings if you need email functionality
# 6. Run: docker-compose up -d
# 7. Access n8n at: http://localhost:5678